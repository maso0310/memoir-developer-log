<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta name="memoir-encryption" content="true">
    <meta name="encryption-mode" content="secure">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>開發者日誌</title>
    <meta name="description" content="開發者日誌">
    
    <!-- 移除不必要的 meta 標籤，只保留核心功能 -->
    <meta name="memoir-id" content="4548b929-5c16-4ee7-a189-60679e2165be">
    <meta name="content-hash" content="ac6f5ab375edeaba">
    <meta name="backend-url" content="https://mastermaso.com/memoirflow">
    
    <!-- 簡化 CSP，允許必要的資源 -->
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; img-src 'self' data: blob:; script-src 'self' 'nonce-e3eb5e5d-14dd-4cc7-b4fe-006def3b3d7f'; style-src 'self' 'unsafe-inline'; connect-src 'self' https://mastermaso.com;">
    
    <!-- 內嵌關鍵 CSS 避免額外請求 -->
    <style nonce="e3eb5e5d-14dd-4cc7-b4fe-006def3b3d7f">
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { 
            font-family: system-ui, -apple-system, sans-serif; 
            background: #1a1a2e; 
            color: #fff; 
            line-height: 1.6;
            overflow-x: hidden;
        }
        .app { min-height: 100vh; display: flex; flex-direction: column; }
        .header { 
            background: rgba(42, 42, 74, 0.95); 
            padding: 1rem; 
            position: sticky; 
            top: 0; 
            z-index: 100;
            backdrop-filter: blur(10px);
        }
        .main-content { flex: 1; display: flex; }
        .media-container { 
            flex: 1; 
            padding: 1rem; 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            justify-content: center;
        }
        .media-display { 
            max-width: 100%; 
            max-height: 70vh; 
            border-radius: 8px; 
            background: #2a2a4a;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 400px;
        }
        .media-display img, .media-display video { 
            max-width: 100%; 
            max-height: 100%; 
            object-fit: contain;
            border-radius: 4px;
        }
        .sidebar { 
            width: 300px; 
            background: #2a2a4a; 
            padding: 1rem;
            overflow-y: auto;
        }
        .description-container { 
            background: rgba(42, 42, 74, 0.5); 
            padding: 1rem; 
            margin: 1rem 0; 
            border-radius: 8px;
            min-height: 60px;
        }
        .navigation { 
            display: flex; 
            gap: 1rem; 
            justify-content: center; 
            padding: 1rem;
        }
        .nav-btn { 
            background: #3b82f6; 
            color: white; 
            border: none; 
            padding: 0.75rem 1.5rem; 
            border-radius: 6px; 
            cursor: pointer; 
            font-size: 0.9rem;
            transition: background 0.2s;
        }
        .nav-btn:hover { background: #2563eb; }
        .nav-btn:disabled { background: #6b7280; cursor: not-allowed; }
        .thumbnails { 
            display: flex; 
            gap: 0.5rem; 
            overflow-x: auto; 
            padding: 1rem;
            scrollbar-width: thin;
        }
        .thumbnail { 
            width: 60px; 
            height: 60px; 
            background: #2a2a4a; 
            border-radius: 4px; 
            cursor: pointer; 
            border: 2px solid transparent;
            flex-shrink: 0;
        }
        .thumbnail.active { border-color: #3b82f6; }
        .thumbnail img { width: 100%; height: 100%; object-fit: cover; border-radius: 2px; }
        .loading { 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            height: 100vh;
            font-size: 1.2rem;
        }
        .hidden { display: none !important; }
        .error { color: #ef4444; }
        .info { color: #10b981; }
        
        /* 性能優化：減少重繪 */
        .media-display img, .media-display video {
            will-change: transform;
        }
        
        /* 移動端優化 */
        @media (max-width: 768px) {
            .main-content { flex-direction: column; }
            .sidebar { width: 100%; max-height: 200px; }
            .thumbnails { justify-content: center; }
        }
    </style>
<script id="enc-payload" type="application/json">{"aad":"030957855cd9","ciphertext_b64":"QNjuYtzHBfnhWG1vVcXLZ1HCt3NemLPJjTIk+wqdcrYeQewWDrYiikIrEXAgn1g1sE/+Co67WBLu/JT/DJ5LXuss8e06PfsdLHEckE3h9EBHVsu6Eedgf95OghXH4HsfCy/a53ouI71aPZbsgGLUGHdkstJdn46QwQ0itTTM/R8+5TgYU3gfTR3jQ/MO9li6JTZn+/DZOa5sqMh7tsfR0q1kWcTyg65fyAHoymkbvUaJoq77teCuvb35zLGwhH3RbOcIxQwvcv94BD621BqkQ445Y8iRfnD0/XZtHjLafRKDHh0ERADsJ6ixWKizjZKp/DZRYsTuZHPunIlwABWP4xd7TftjFfQd9JupcV7GWR2jwk2L3fD5sJ2+BUerSK8fi+m5BmbQ+/hLeS2JUml6dM0qtuy7pdGX7dak/ooVrC7VB5aGzmgvk9JUx8s2LrQAazdQjMQar35oew3cQZJGLeGUQlel/bfSVNTYnSBfeN3L7m82MqCD27atwnhmt4rt8fNij0SRCPYAUpp0jzlqGgWmRoBiImntHzri2NxvwT+kpjWYydCvFJ1ybEZYv1PueuQHNzh3LxWVjYF6a3z2RTYSLk79VdrJPSpmMXFnHGZvYEa8iMO6gdH1XiLjdIwVkCJOQK6I1Fo/XMrVdOpGAdEI8DCXMD/ffgD6JrSs6ZFRsFnnzyS4hkxS1GTZS7AZ7CFo643KOWaeHYxFPOM7zsiT3YBLsnC+9TaPGUcN3Rf4GJyuYerTlcFq29bUpXVZM9p/f+uU86oVMPJV4n3pP5ydWOteho8CMrWFJ6NucJ+KYU/fr6ap17lvAoeBeQaH/Sudv7nuEtO70F1xpk+MxDwBe3qH0q3MMds84QCF7I1863ZvwbkXgOhdP4ggAcvPEU13m2Ck2ReUfHfpF+c989JpiarLIpK7+3trErayTeC1Q61iLBDzAbac+ZApBoel4RbMEKlbFko9/WOK/Uv49Sgbzz686sJROZE/k84zobQ9U8WqEjyxXy2VSw7mxeUQQ5VIG71m4HQ6MW1GET8uyfIez01gCRR1pz7is9t1rsQzM13r66NvnjYsp5nwb1KWqP/Xxq0+kfhuyYQXzOjtAUrOtGaiOy5a/DnDGgBVsznYBABtkyNqJdlXaic3UEU4KCcpSq4RA1YrIxb6tZT3WThR4UeqzkCvBVYMqYuJKSr6KOry/EDUxNk6jiIoX7XhTYIWunE50hm1dVQajGvC+FfJq7NaDKX9KawVGOq99xUotRSLzOSx8lMqtp7Z/8ptStLV1yfCYU/c2H5YAXshMeqBWadZEYJDa4XTWnzMyKiVb5Z45XkX0WlZsbNpmGGMhCCBk7d9zmIuXWcyVv9TSdbDLLep68SrFFgNlnWbUphpQVNmQz9MhiTW+7zWANgQvsOn1uCFytt5WCEtL1kFhWBpSXZYZO6eye8f3YzmZBzJOxMwqgBnpJI8o9Ws0Wuia2T/Vl5anwbU8yhOTNemAIwjkiDGtZ+ANjMTClJMt8kkJ3hp/zpL+wIDKlzQe58hlX924Vyo11E9WjDcjaFeqElkbEM1ph+soqlsod70ToYp4oi7h+ssG/wDLozlC/ITZnwgttmixQEKmNOFe7X6z4QGVsdhaFjRKCDiBdBHFqwp+A6CkypN9C+RSTOzofage4IoqMw=","iv_b64":"ex7KqKSDdrfnca4o","salt_b64":"ftTio4ayvp5mfwmPcBGCdA=="}</script>
<meta name="require-password" content="true">
</head>
<body>
    <!-- 簡化的載入畫面 -->
    <div id="loadingScreen" class="loading">
        <div>載入中...</div>
    </div>

    <!-- 主應用 -->
    <div id="app" class="app hidden">
        <!-- 簡化的 Header -->
        <header class="header">
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <h1 style="font-size: 1.2rem;">開發者日誌</h1>
                <div style="display: flex; gap: 1rem; align-items: center;">
                    <span id="eventInfo">事件 <span id="currentEventNum">1</span>/<span id="totalEvents">1</span></span>
                    <span id="mediaInfo">媒體 <span id="currentMediaNum">1</span>/<span id="mediaCount">0</span></span>
                </div>
            </div>
        </header>

        <!-- 主要內容區 -->
        <div class="main-content">
            <!-- 媒體顯示區 -->
            <div class="media-container">
                <div id="mediaDisplay" class="media-display">
                    <div>請選擇媒體檔案</div>
                </div>
                
                <!-- 描述區 -->
                <div id="descriptionContainer" class="description-container">
                    <div id="eventDescription"></div>
                </div>

                <!-- 導航按鈕 -->
                <div class="navigation">
                    <button id="prevEventBtn" class="nav-btn">上一事件</button>
                    <button id="prevMediaBtn" class="nav-btn">上一媒體</button>
                    <button id="nextMediaBtn" class="nav-btn">下一媒體</button>
                    <button id="nextEventBtn" class="nav-btn">下一事件</button>
                </div>
            </div>

            <!-- 側邊欄 -->
            <div class="sidebar">
                <h3>時間軸</h3>
                <div id="timeline"></div>
                
                <!-- 縮圖區 -->
                <div id="thumbnails" class="thumbnails"></div>
            </div>
        </div>
    </div>

    <!-- 高性能 JavaScript -->
    

    <!-- 數據注入點 -->
    
    
    
    

        
        

        
        
    
        
        

        
        

        
        
<script src="assets/js/main.js" nonce="OW7oODVg7B1Rqj0a+79CVw"></script>
</body>
</html>