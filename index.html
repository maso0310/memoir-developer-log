<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta name="memoir-encryption" content="true">
    <meta name="encryption-mode" content="secure">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>開發者日誌</title>
    <meta name="description" content="開發者日誌">
    
    <!-- 移除不必要的 meta 標籤，只保留核心功能 -->
    <meta name="memoir-id" content="4548b929-5c16-4ee7-a189-60679e2165be">
    <meta name="content-hash" content="ac6f5ab375edeaba">
    <meta name="backend-url" content="https://mastermaso.com/memoirflow">
    
    <!-- 簡化 CSP，允許必要的資源 -->
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; img-src 'self' data: blob:; script-src 'self' 'nonce-ad4b1b7c-5305-46a5-84d8-c6b194629726'; style-src 'self' 'unsafe-inline'; connect-src 'self' https://mastermaso.com;">
    
    <!-- 內嵌關鍵 CSS 避免額外請求 -->
    <style nonce="ad4b1b7c-5305-46a5-84d8-c6b194629726">
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { 
            font-family: system-ui, -apple-system, sans-serif; 
            background: #1a1a2e; 
            color: #fff; 
            line-height: 1.6;
            overflow-x: hidden;
        }
        .app { min-height: 100vh; display: flex; flex-direction: column; }
        .header { 
            background: rgba(42, 42, 74, 0.95); 
            padding: 1rem; 
            position: sticky; 
            top: 0; 
            z-index: 100;
            backdrop-filter: blur(10px);
        }
        .main-content { flex: 1; display: flex; }
        .media-container { 
            flex: 1; 
            padding: 1rem; 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            justify-content: center;
        }
        .media-display { 
            max-width: 100%; 
            max-height: 70vh; 
            border-radius: 8px; 
            background: #2a2a4a;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 400px;
        }
        .media-display img, .media-display video { 
            max-width: 100%; 
            max-height: 100%; 
            object-fit: contain;
            border-radius: 4px;
        }
        .sidebar { 
            width: 300px; 
            background: #2a2a4a; 
            padding: 1rem;
            overflow-y: auto;
        }
        .description-container { 
            background: rgba(42, 42, 74, 0.5); 
            padding: 1rem; 
            margin: 1rem 0; 
            border-radius: 8px;
            min-height: 60px;
        }
        .navigation { 
            display: flex; 
            gap: 1rem; 
            justify-content: center; 
            padding: 1rem;
        }
        .nav-btn { 
            background: #3b82f6; 
            color: white; 
            border: none; 
            padding: 0.75rem 1.5rem; 
            border-radius: 6px; 
            cursor: pointer; 
            font-size: 0.9rem;
            transition: background 0.2s;
        }
        .nav-btn:hover { background: #2563eb; }
        .nav-btn:disabled { background: #6b7280; cursor: not-allowed; }
        .thumbnails { 
            display: flex; 
            gap: 0.5rem; 
            overflow-x: auto; 
            padding: 1rem;
            scrollbar-width: thin;
        }
        .thumbnail { 
            width: 60px; 
            height: 60px; 
            background: #2a2a4a; 
            border-radius: 4px; 
            cursor: pointer; 
            border: 2px solid transparent;
            flex-shrink: 0;
        }
        .thumbnail.active { border-color: #3b82f6; }
        .thumbnail img { width: 100%; height: 100%; object-fit: cover; border-radius: 2px; }
        .loading { 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            height: 100vh;
            font-size: 1.2rem;
        }
        .hidden { display: none !important; }
        .error { color: #ef4444; }
        .info { color: #10b981; }
        
        /* 性能優化：減少重繪 */
        .media-display img, .media-display video {
            will-change: transform;
        }
        
        /* 移動端優化 */
        @media (max-width: 768px) {
            .main-content { flex-direction: column; }
            .sidebar { width: 100%; max-height: 200px; }
            .thumbnails { justify-content: center; }
        }
    </style>
<script id="enc-payload" type="application/json">{"aad":"030957855cd9","ciphertext_b64":"epC5GJ+66rl6pKdIOjRs2H7dOZUZxZDjppPT4g7EcjUIzVJKgx6wnHfCD41L5sr4br7RHcN/c34Fe0ocEOnMq3eiavRaImYCtMJqlmmAX6Vv9GZLwGxvK7TJ2zT5OV7mVBN59sHxMbJfxiny+AQsPUiXOsOspPQeJWBL/Z4FtvqTB8QVZ1vvsNX8rr9f+2kFPMdOXIcRZVgVBbYSWtgpAZfigxJWzX3HEC9JWK+WCLOn5OYB0NGZmDdeqVLVyL+ukoGxO3wF5Uf5Yt+AlT+++kNbrwo3du1woi03ySOIvO5HdTea3y1huo535eVz8yO0afNTUiPVDcKPapakELYBGdalpeeZgIFDCL7xHuzWcxUamBnkOPc6JaqTfHIdOYSqL+Ay2KNju3t0490HvMu6DLEdF5Bhj+GenaACsabII8R6gtoCWI+xlQK8r7G3sZzxSphXibs8OcWZR/ovNoJFXTE9mlMEeyrcK/Wxs5YUKM78HAYyBq3zZNIxOwAs2sq4EzVDkof9dwHrvThYssJoDLP9N5gK6wLvaxa2Kv+9JI291eGHChI3sP+DNvYYJA+F51GniTEJIXwaV+YXClGmhOSbkV4sACCcFpqrWJNbSSBDMoCJZLtt11O5GEoY8He2dFLBBSWTiWPSKvnzq8/jW+jHQk1rgU7Y7fDzDauT9mYOaWsbAt81NMcHw+cRuc2FkNeAukMkrRoDI47YOHRZUOxqFYs55zc5SDivhBbPbOmlvsAy0eVPDuifY3mlMD9nAGYw8dJj/Y9i5PZHBj5FPhIm6n5gmhQjaf9Mcophxpy7L0Oln+zOlEgVQJSnYGYQfaUOsuLdlN+xNWrnXyKIsMZOgGvBbjGXpiEp0tBFkzwxa7vPDppvqo/1Nu1H9l5cRWPtQ70RmvTW90gtjSq+mhxIaVsinuABHuJ1YyRHKCV62vzkUYxMqt2540QvuTMkc2i/mJxAPex8ImWUyS7aoMwEYs12Kc9Tk+9irSjxHX+fNLdGkFSfQVdn6VlPs9CN1ZmagWinnlrWi+xvTCMwePPZuiDEGSrWCYy5ZiE7+L8QeI945vV41aXpyGC97mcLVqmc7RpFP8IOijvvI/mmnuwSS0v6BQh2plKb43vQfP345w03ylNeBZWHte2qoqQ8gLwzWK1QBf3SagmAN/WTzZzX+iTvlhff1iMjBU5VltKB6cEKBbUjMoVAihv57ZYTE24P/pNaAF73Ze+Czl8Fv50L7DwMWGY2vQo8+VWH3y0A6YezJacI/yFK5Ehkf2IepVVSQzLW/bVlzoeKEO5V2dW2EyOCorVWBVPNVFCy1B1Nz3jzIVXXczGFJSgHTxn5COSpBrwCYBCIZCGRoPPO3ARjz2NC+59vpxv4qa9W9QhlhqY8RZj2zRkw2chfLh5ghitXrKYM7R3KLGUh+9QS2H1pOGRtrCOz8g8Suh3u/kj1r6+nrV5CH99CvJiQQRM5YJJxMnDD0vhxp37rZcpyLR4wQdDz0mtzFBXqUOXC/qnIE3SvRzZcqu+qTLsxoW008i6lvPwWKlP3i5O3Zh5njirNu9AzSxuia79ABNHetX7/nDiR+b3Enf3sb0JueJjPZwKzba0kbzAyehsbWosONu3PeaWI0ohp7KYny8KHqQTwZyf4ERDF49GAV5PzcR0hc7EmHV4=","iv_b64":"gCELuKocJtnRjvrF","salt_b64":"6A+SnFAak/0u9fcTbahT4w=="}</script>
<meta name="require-password" content="true">
</head>
<body>
    <!-- 簡化的載入畫面 -->
    <div id="loadingScreen" class="loading">
        <div>載入中...</div>
    </div>

    <!-- 主應用 -->
    <div id="app" class="app hidden">
        <!-- 簡化的 Header -->
        <header class="header">
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <h1 style="font-size: 1.2rem;">開發者日誌</h1>
                <div style="display: flex; gap: 1rem; align-items: center;">
                    <span id="eventInfo">事件 <span id="currentEventNum">1</span>/<span id="totalEvents">1</span></span>
                    <span id="mediaInfo">媒體 <span id="currentMediaNum">1</span>/<span id="mediaCount">0</span></span>
                </div>
            </div>
        </header>

        <!-- 主要內容區 -->
        <div class="main-content">
            <!-- 媒體顯示區 -->
            <div class="media-container">
                <div id="mediaDisplay" class="media-display">
                    <div>請選擇媒體檔案</div>
                </div>
                
                <!-- 描述區 -->
                <div id="descriptionContainer" class="description-container">
                    <div id="eventDescription"></div>
                </div>

                <!-- 導航按鈕 -->
                <div class="navigation">
                    <button id="prevEventBtn" class="nav-btn">上一事件</button>
                    <button id="prevMediaBtn" class="nav-btn">上一媒體</button>
                    <button id="nextMediaBtn" class="nav-btn">下一媒體</button>
                    <button id="nextEventBtn" class="nav-btn">下一事件</button>
                </div>
            </div>

            <!-- 側邊欄 -->
            <div class="sidebar">
                <h3>時間軸</h3>
                <div id="timeline"></div>
                
                <!-- 縮圖區 -->
                <div id="thumbnails" class="thumbnails"></div>
            </div>
        </div>
    </div>

    <!-- 高性能 JavaScript -->
    

    <!-- 數據注入點 -->
    {{MEMOIR_DATA_SCRIPT}}
    
    
    

        
        

        
        
    {{MSE_DECRYPT_SCRIPT}}

        
        

        
        
<script src="assets/js/main.js" nonce="jGFipB0zcjoJ2FRwQHZE2Q"></script>
</body>
</html>